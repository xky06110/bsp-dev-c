global_settings:
  monitor_sleep_ms: 1000
modules:
- id: blink_led
  name: BlinkLED
  constructor_args:
    blink_cycle: 250
- id: bmi088
  name: BMI088
  constructor_args:
    gyro_freq: BMI088::GyroFreq::GYRO_1000HZ_BW116HZ
    accl_freq: BMI088::AcclFreq::ACCL_800HZ
    gyro_range: BMI088::GyroRange::DEG_2000DPS
    accl_range: BMI088::AcclRange::ACCL_24G
    rotation:
      w: 1.0
      x: 0.0
      y: 0.0
      z: 0.0
    pid_param:
      k: 0.15
      p: 1.0
      i: 0.1
      d: 0.0
      i_limit: 0.3
      out_limit: 1.0
      cycle: false
    gyro_topic_name: bmi088_gyro
    accl_topic_name: bmi088_accl
    target_temperature: 45
    task_stack_depth: 2048
    camera_sync_pin_name: CAMERA
    camera_sync_div: 10
- id: ahrs
  name: MadgwickAHRS
  constructor_args:
    beta: 0.033
    gyro_topic_name: bmi088_gyro
    accl_topic_name: bmi088_accl
    quaternion_topic_name: ahrs_quaternion
    euler_topic_name: ahrs_euler
    task_stack_depth: 2048
- id: buzzer_alarm
  name: BuzzerAlarm
  constructor_args:
    alarm_freq: 5000
    alarm_duty: 300
    alarm_cycle: 300
- id: cmd
  name: CMD
  constructor_args:
    mode: CMD::Mode::CMD_OP_CTRL
    chassis_cmd_topic_name: chassis_cmd
    gimbal_cmd_topic_name: gimbal_cmd
    fire_topic_name: fire_notify
    host_euler_topic_name: target_eulr
- id: dr16
  name: DR16
  constructor_args:
    CMD: '@cmd'
    task_stack_depth_uart: 2048
    cmd_data_tp_name: cmd_raw_data_
- id: motor_can1
  name: Motor
  constructor_args:
    can_bus_name: can1
    motor0:
      model: Motor<RMMotorContainer>::Model::MOTOR_NONE
      reverse: false
    motor1:
      model: Motor<RMMotorContainer>::Model::MOTOR_NONE
      reverse: false
    motor2:
      model: Motor<RMMotorContainer>::Model::MOTOR_NONE
      reverse: false
    motor3:
      model: Motor<RMMotorContainer>::Model::MOTOR_NONE
      reverse: false
    motor4:
      model: Motor<RMMotorContainer>::Model::MOTOR_M3508
      reverse: false
    motor5:
      model: Motor<RMMotorContainer>::Model::MOTOR_M3508
      reverse: false
    motor6:
      model: Motor<RMMotorContainer>::Model::MOTOR_M3508
      reverse: false
    motor7:
      model: Motor<RMMotorContainer>::Model::MOTOR_M3508
      reverse: false
  template_args:
    MotorType: RMMotorContainer
- id: motor_can2
  name: Motor
  constructor_args:
    can_bus_name: can2
    motor0:
      model: Motor<RMMotorContainer>::Model::MOTOR_NONE
      reverse: false
  template_args:
    MotorType: RMMotorContainer
- id: mecanum_chassis
  name: Chassis
  constructor_args:
    cmd: '@cmd'
    motor_wheel_0: '@motor_can1.GetMotor(4)'
    motor_wheel_1: '@motor_can1.GetMotor(5)'
    motor_wheel_2: '@motor_can1.GetMotor(6)'
    motor_wheel_3: '@motor_can1.GetMotor(7)'
    motor_steer_0: '@motor_can1.GetMotor(0)'
    motor_steer_1: '@motor_can1.GetMotor(1)'
    motor_steer_2: '@motor_can1.GetMotor(2)'
    motor_steer_3: '@motor_can1.GetMotor(3)'
    task_stack_depth: 4096
    wheel_radius: 0.072
    wheel_to_center: 0.207
    gravity_height: 0.0
    wheel_resistance: 0.0
    error_compensation: 0.0
    pid_velocity_x_:
      k: 1.0
      p: 5.0
      i: 2.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_velocity_y_:
      k: 1.0
      p: 5.0
      i: 2.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_omega_:
      k: 1.0
      p: 5.0
      i: 2.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_wheel_angle_0_:
      k: 1.0
      p: 0.2
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_wheel_angle_1_:
      k: 1.0
      p: 0.2
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_wheel_angle_2_:
      k: 1.0
      p: 0.2
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_wheel_angle_3_:
      k: 1.0
      p: 0.2
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_steer_angle_0_:
      k: 1.0
      p: 1.0
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_steer_angle_1_:
      k: 1.0
      p: 0.1
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_steer_angle_2_:
      k: 1.0
      p: 0.1
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_steer_angle_3_:
      k: 1.0
      p: 0.1
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
  template_args:
    ChassisType: Mecanum<RMMotorContainer>
    MotorType: RMMotorContainer
- id: launcher
  name: Launcher
  constructor_args:
    cmd: '@cmd'
    task_stack_depth: 2048
    pid_param_trig:
      k: 1.0
      p: 0.0
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    pid_param_fric:
      k: 1.0
      p: 0.0
      i: 0.0
      d: 0.0
      i_limit: 0.0
      out_limit: 0.0
      cycle: false
    motor_fric_0: '@motor_can2.GetMotor(0)'
    motor_fric_1: '@motor_can2.GetMotor(1)'
    motor_trig: '@motor_can2.GetMotor(2)'
    num_trig_tooth: 0.0
    trig_gear_ratio: 0.0
    fric_radius: 0.0
    default_bullet_speed: 0.0
    min_launch_delay: 0.0
  template_args:
    MotorType: RMMotorContainer
- id: EventBinder_0
  name: EventBinder
  constructor_args:
    dr16: '@dr16'
    chassis: '@mecanum_chassis'
  template_args:
    ChassisType: Mecanum<RMMotorContainer>
    MotorType: RMMotorContainer
- id: SharedTopic_0
  name: SharedTopic
  constructor_args:
    uart_name: uart_ai
    task_stack_depth: 2048
    buffer_size: 256
    topic_configs:
    - fire_notify
    - target_eulr
- id: SharedTopicClient_0
  name: SharedTopicClient
  constructor_args:
    uart_name: usb_ai
    task_stack_depth: 2048
    buffer_size: 256
    topic_configs:
    - ahrs_euler
